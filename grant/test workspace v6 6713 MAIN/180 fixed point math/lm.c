typedef short shortDP15;
typedef int intDP30;
//-------------------------------------------------------------------

//-------------------------------------------------------------------
#define BUFFLEN 8
//-------------------------------------------------------------------

//-------------------------------------------------------------------

//-------------------------------------------------------------------


//-------------------------------------------------------------------
int main(void)
{
	shortDP15 data[BUFFLEN] =  { 32767,  30000,  20900,  25000, -10000, -20000, -30000, -32768};   // 32767/32768 = .999969
	shortDP15 coeff[BUFFLEN] = {-30000, -30000, -30000, -30000,  30000,  30000,  30000,  30000};  // -30000/32768 = -.915527
	long summation = 0;
	int i;
	int answer;
	
	for(i=0; i<BUFFLEN; i++)
	  {
	  	summation = _lsadd(data[i]*coeff[i], summation);
	  }

	if(summation >= 0)
		summation = _lsadd(1<<29, summation);
	else
		summation = _lsadd(-(1<<29), summation);
	answer = _sat(summation >> 30);
	return answer;
} // main
//---------------------------------------------------------------------------------------------

// answer is 5.628029.
// change 25000 to 10000, answer is 5.209834
